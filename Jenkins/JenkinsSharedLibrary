#!/usr/bin/env groovy

@Library('shared-library@master') _ //master or whatever branch

pipeline{
	
        tools {
        maven "maven3.6.3"
    }
	agent any
	
         stages{

              stage('maven build'){
                  steps{
                      script{
		    	         build('Install')
                      	  }
               	     }  
                 }	
             stage(S_Sonar_Report){
                 steps{
                        withSonarQubeEnv('sonarqube8.9'){
                          script{
                          sonarQube.sonarAnalysis('A1','Spring-Boot-Thymeleaf','http://13.233.33.180:9000','squ_6dd59553941c600ed9a5898128fec3b395759a68')
                   }
               }
           }
       }
                 stage ('Check logs') {
                    steps {
                        filterLogs ('WARNING', 50)
                    }
                }
		
           }	       	     	         
}
