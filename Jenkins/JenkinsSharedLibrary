#!/usr/bin/env groovy

@Library('shared-library@master') _ //master or whatever branch

pipeline{
	
        tools {
        maven "maven3.6.3"
    }
	agent any
	
         stages{

              stage('maven build'){
                  steps{
                      script{
		    	         build('Install')
                      	  }
               	     }  
                 }	
             stage(S_Sonar_Report){
                 steps{
                        withSonarQubeEnv('SonarQubeSrvr'){
                          script{
                          sonarQube.sonarAnalysis('Demo Maven Webapp','http://18.183.199.171:9000','squ_6dd59553941c600ed9a5898128fec3b395759a68')
                   }
               }
           }
       }
	 /* stage('S_NexusArtifactUploader'){
            steps{
                script {
                      nexus.nexus(
                      'spring-boot-thymeleaf',
                      '',
                      '/var/lib/jenkins/.m2/repository/pl/codeleak/demos/sbt/spring-boot-thymeleaf/2.0.0/spring-boot-thymeleaf-2.0.0.war',
                      'war',
                      'nexus',
                      'pl.codeleak.demos.sbt',
                      '13.233.100.229:8081',
                      'nexus3',
                      'http',
                      'ansible',
                      '2.0.0')
                }
            }
        }*/
            stage ('Check logs') {
                    steps {
                        filterLogs ('WARNING', 50)
                    }
                }
		
           }	
	
}
